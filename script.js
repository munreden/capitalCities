const data = {
    "continents": [
        {
            "id": "europe",
            "language": "ES",
            "name": "Europa",
            "countries": [
                { "country": "Alemania", "capital": "Berlín", "flagClass": "flag-icon-de" },
                { "country": "Andorra", "capital": "Andorra la Vieja", "flagClass": "flag-icon-ad" },
                { "country": "Austria", "capital": "Viena", "flagClass": "flag-icon-at" },
                { "country": "Bélgica", "capital": "Bruselas", "flagClass": "flag-icon-be" },
                { "country": "Bielorrusia", "capital": "Minsk", "flagClass": "flag-icon-by" },
                { "country": "Bosnia y Herzegovina", "capital": "Sarajevo", "flagClass": "flag-icon-ba" },
                { "country": "Bulgaria", "capital": "Sofía", "flagClass": "flag-icon-bg" },
                { "country": "Croacia", "capital": "Zagreb", "flagClass": "flag-icon-hr" },
                { "country": "Chipre", "capital": "Nicosia", "flagClass": "flag-icon-cy" },
                { "country": "Dinamarca", "capital": "Copenhague", "flagClass": "flag-icon-dk" },
                { "country": "Eslovaquia", "capital": "Bratislava", "flagClass": "flag-icon-sk" },
                { "country": "Eslovenia", "capital": "Liubliana", "flagClass": "flag-icon-si" },
                { "country": "España", "capital": "Madrid", "flagClass": "flag-icon-es" },
                { "country": "Estonia", "capital": "Tallin", "flagClass": "flag-icon-ee" },
                { "country": "Finlandia", "capital": "Helsinki", "flagClass": "flag-icon-fi" },
                { "country": "Francia", "capital": "París", "flagClass": "flag-icon-fr" },
                { "country": "Georgia", "capital": "Tiflis", "flagClass": "flag-icon-ge" },
                { "country": "Grecia", "capital": "Atenas", "flagClass": "flag-icon-gr" },
                { "country": "Hungría", "capital": "Budapest", "flagClass": "flag-icon-hu" },
                { "country": "Islandia", "capital": "Reikiavik", "flagClass": "flag-icon-is" },
                { "country": "Irlanda", "capital": "Dublín", "flagClass": "flag-icon-ie" },
                { "country": "Italia", "capital": "Roma", "flagClass": "flag-icon-it" },
                { "country": "Kazajistán", "capital": "Astaná", "flagClass": "flag-icon-kz" },
                { "country": "Letonia", "capital": "Riga", "flagClass": "flag-icon-lv" },
                { "country": "Liechtenstein", "capital": "Vaduz", "flagClass": "flag-icon-li" },
                { "country": "Lituania", "capital": "Vilna", "flagClass": "flag-icon-lt" },
                { "country": "Luxemburgo", "capital": "Luxemburgo", "flagClass": "flag-icon-lu" },
                { "country": "Malta", "capital": "La Valeta", "flagClass": "flag-icon-mt" },
                { "country": "Moldavia", "capital": "Chisináu", "flagClass": "flag-icon-md" },
                { "country": "Mónaco", "capital": "Mónaco", "flagClass": "flag-icon-mc" },
                { "country": "Montenegro", "capital": "Podgorica", "flagClass": "flag-icon-me" },
                { "country": "Noruega", "capital": "Oslo", "flagClass": "flag-icon-no" },
                { "country": "Países Bajos", "capital": "Ámsterdam", "flagClass": "flag-icon-nl" },
                { "country": "Polonia", "capital": "Varsovia", "flagClass": "flag-icon-pl" },
                { "country": "Portugal", "capital": "Lisboa", "flagClass": "flag-icon-pt" },
                { "country": "Reino Unido", "capital": "Londres", "flagClass": "flag-icon-gb" },
                { "country": "República Checa", "capital": "Praga", "flagClass": "flag-icon-cz" },
                { "country": "Rumania", "capital": "Bucarest", "flagClass": "flag-icon-ro" },
                { "country": "Rusia", "capital": "Moscú", "flagClass": "flag-icon-ru" },
                { "country": "San Marino", "capital": "San Marino", "flagClass": "flag-icon-sm" },
                { "country": "Serbia", "capital": "Belgrado", "flagClass": "flag-icon-rs" },
                { "country": "Suecia", "capital": "Estocolmo", "flagClass": "flag-icon-se" },
                { "country": "Suiza", "capital": "Berna", "flagClass": "flag-icon-ch" },
                { "country": "Ucrania", "capital": "Kiev", "flagClass": "flag-icon-ua" },
                { "country": "Vaticano", "capital": "Ciudad del Vaticano", "flagClass": "flag-icon-va" }
            ]
        },
        {
            "id": "asia",
            "language": "ES",
            "name": "Asia",
            "countries": [
                { "country": "Afganistán", "capital": "Kabul", "flagClass": "flag-icon-af" },
                { "country": "Arabia Saudita", "capital": "Riad", "flagClass": "flag-icon-sa" },
                { "country": "Armenia", "capital": "Ereván", "flagClass": "flag-icon-am" },
                { "country": "Azerbaiyán", "capital": "Bakú", "flagClass": "flag-icon-az" },
                { "country": "Bangladés", "capital": "Daca", "flagClass": "flag-icon-bd" },
                { "country": "Baréin", "capital": "Manama", "flagClass": "flag-icon-bh" },
                { "country": "Birmania", "capital": "Naypyidó", "flagClass": "flag-icon-mm" },
                { "country": "Brunéi", "capital": "Bandar Seri Begawan", "flagClass": "flag-icon-bn" },
                { "country": "Bután", "capital": "Timbu", "flagClass": "flag-icon-bt" },
                { "country": "Camboya", "capital": "Nom Pen", "flagClass": "flag-icon-kh" },
                { "country": "Catar", "capital": "Doha", "flagClass": "flag-icon-qa" },
                { "country": "China", "capital": "Pekín", "flagClass": "flag-icon-cn" },
                { "country": "Chipre", "capital": "Nicosia", "flagClass": "flag-icon-cy" },
                { "country": "Corea del Norte", "capital": "Pionyang", "flagClass": "flag-icon-kp" },
                { "country": "Corea del Sur", "capital": "Seúl", "flagClass": "flag-icon-kr" },
                { "country": "Emiratos Árabes Unidos", "capital": "Abu Dabi", "flagClass": "flag-icon-ae" },
                { "country": "Filipinas", "capital": "Manila", "flagClass": "flag-icon-ph" },
                { "country": "Georgia", "capital": "Tiflis", "flagClass": "flag-icon-ge" },
                { "country": "India", "capital": "Nueva Delhi", "flagClass": "flag-icon-in" },
                { "country": "Indonesia", "capital": "Yakarta", "flagClass": "flag-icon-id" },
                { "country": "Irak", "capital": "Bagdad", "flagClass": "flag-icon-iq" },
                { "country": "Irán", "capital": "Teherán", "flagClass": "flag-icon-ir" },
                { "country": "Israel", "capital": "Jerusalén", "flagClass": "flag-icon-il" },
                { "country": "Japón", "capital": "Tokio", "flagClass": "flag-icon-jp" },
                { "country": "Jordania", "capital": "Ammán", "flagClass": "flag-icon-jo" },
                { "country": "Kazajistán", "capital": "Astaná", "flagClass": "flag-icon-kz" },
                { "country": "Kirguistán", "capital": "Biskek", "flagClass": "flag-icon-kg" },
                { "country": "Kuwait", "capital": "Kuwait", "flagClass": "flag-icon-kw" },
                { "country": "Laos", "capital": "Vientián", "flagClass": "flag-icon-la" },
                { "country": "Líbano", "capital": "Beirut", "flagClass": "flag-icon-lb" },
                { "country": "Malasia", "capital": "Kuala Lumpur", "flagClass": "flag-icon-my" },
                { "country": "Maldivas", "capital": "Malé", "flagClass": "flag-icon-mv" },
                { "country": "Mongolia", "capital": "Ulán Bator", "flagClass": "flag-icon-mn" },
                { "country": "Nepal", "capital": "Katmandú", "flagClass": "flag-icon-np" },
                { "country": "Omán", "capital": "Mascate", "flagClass": "flag-icon-om" },
                { "country": "Pakistán", "capital": "Islamabad", "flagClass": "flag-icon-pk" },
                { "country": "Palestina", "capital": "Jerusalén Este", "flagClass": "flag-icon-ps" },
                { "country": "Rusia", "capital": "Moscú", "flagClass": "flag-icon-ru" },
                { "country": "Singapur", "capital": "Singapur", "flagClass": "flag-icon-sg" },
                { "country": "Siria", "capital": "Damasco", "flagClass": "flag-icon-sy" },
                { "country": "Sri Lanka", "capital": "Sri Jayawardenapura Kotte", "flagClass": "flag-icon-lk" },
                { "country": "Tailandia", "capital": "Bangkok", "flagClass": "flag-icon-th" },
                { "country": "Tayikistán", "capital": "Dusambé", "flagClass": "flag-icon-tj" },
                { "country": "Timor Oriental", "capital": "Dili", "flagClass": "flag-icon-tl" },
                { "country": "Turkmenistán", "capital": "Asjabad", "flagClass": "flag-icon-tm" },
                { "country": "Turquía", "capital": "Ankara", "flagClass": "flag-icon-tr" },
                { "country": "Uzbekistán", "capital": "Taskent", "flagClass": "flag-icon-uz" },
                { "country": "Vietnam", "capital": "Hanói", "flagClass": "flag-icon-vn" },
                { "country": "Yemen", "capital": "Saná", "flagClass": "flag-icon-ye" },
                { "country": "Kazajistán", "capital": "Nursultán", "flagClass": "flag-icon-kz" },
                { "country": "Seychelles", "capital": "Victoria", "flagClass": "flag-icon-sc" }
            ]
        },
        {
            "id": "africa",
            "language": "ES",
            "name": "África",
            "countries": [
                { "country": "Argelia", "capital": "Argel", "flagClass": "flag-icon-dz" },
                { "country": "Angola", "capital": "Luanda", "flagClass": "flag-icon-ao" },
                { "country": "Benín", "capital": "Porto Novo", "flagClass": "flag-icon-bj" },
                { "country": "Botsuana", "capital": "Gaborone", "flagClass": "flag-icon-bw" },
                { "country": "Burkina Faso", "capital": "Uagadugú", "flagClass": "flag-icon-bf" },
                { "country": "Burundi", "capital": "Buyumbura", "flagClass": "flag-icon-bi" },
                { "country": "Cabo Verde", "capital": "Praia", "flagClass": "flag-icon-cv" },
                { "country": "Camerún", "capital": "Yaundé", "flagClass": "flag-icon-cm" },
                { "country": "Chad", "capital": "Yamena", "flagClass": "flag-icon-td" },
                { "country": "Comoras", "capital": "Moroni", "flagClass": "flag-icon-km" },
                { "country": "Congo (República del)", "capital": "Brazzaville", "flagClass": "flag-icon-cg" },
                { "country": "Congo (República Democrática del)", "capital": "Kinshasa", "flagClass": "flag-icon-cd" },
                { "country": "Costa de Marfil", "capital": "Yamusukro", "flagClass": "flag-icon-ci" },
                { "country": "Djibouti", "capital": "Yibuti", "flagClass": "flag-icon-dj" },
                { "country": "Egipto", "capital": "El Cairo", "flagClass": "flag-icon-eg" },
                { "country": "Ecuatorial Guinea", "capital": "Malabo", "flagClass": "flag-icon-gq" },
                { "country": "Eritrea", "capital": "Asmara", "flagClass": "flag-icon-er" },
                { "country": "Esuatini", "capital": "Mbabane", "flagClass": "flag-icon-sz" },
                { "country": "Etiopía", "capital": "Adís Abeba", "flagClass": "flag-icon-et" },
                { "country": "Gabón", "capital": "Libreville", "flagClass": "flag-icon-ga" },
                { "country": "Gambia", "capital": "Banjul", "flagClass": "flag-icon-gm" },
                { "country": "Ghana", "capital": "Acra", "flagClass": "flag-icon-gh" },
                { "country": "Guinea", "capital": "Conakri", "flagClass": "flag-icon-gn" },
                { "country": "Guinea-Bisáu", "capital": "Bissau", "flagClass": "flag-icon-gw" },
                { "country": "Ivory Coast", "capital": "Yamoussoukro", "flagClass": "flag-icon-ci" },
                { "country": "Kenia", "capital": "Nairobi", "flagClass": "flag-icon-ke" },
                { "country": "Lesoto", "capital": "Maserú", "flagClass": "flag-icon-ls" },
                { "country": "Liberia", "capital": "Monrovia", "flagClass": "flag-icon-lr" },
                { "country": "Libia", "capital": "Trípoli", "flagClass": "flag-icon-ly" },
                { "country": "Madagascar", "capital": "Antananarivo", "flagClass": "flag-icon-mg" },
                { "country": "Malawi", "capital": "Lilongüe", "flagClass": "flag-icon-mw" },
                { "country": "Malí", "capital": "Bamako", "flagClass": "flag-icon-ml" },
                { "country": "Mauricio", "capital": "Port Louis", "flagClass": "flag-icon-mu" },
                { "country": "Mauritania", "capital": "Nuakchot", "flagClass": "flag-icon-mr" },
                { "country": "Marruecos", "capital": "Rabat", "flagClass": "flag-icon-ma" },
                { "country": "Mozambique", "capital": "Maputo", "flagClass": "flag-icon-mz" },
                { "country": "Namibia", "capital": "Windhoek", "flagClass": "flag-icon-na" },
                { "country": "Níger", "capital": "Niamey", "flagClass": "flag-icon-ne" },
                { "country": "Nigeria", "capital": "Abuja", "flagClass": "flag-icon-ng" },
                { "country": "Ruanda", "capital": "Kigali", "flagClass": "flag-icon-rw" },
                { "country": "Santo Tomé y Príncipe", "capital": "Santo Tomé", "flagClass": "flag-icon-st" },
                { "country": "Senegal", "capital": "Dakar", "flagClass": "flag-icon-sn" },
                { "country": "Seychelles", "capital": "Victoria", "flagClass": "flag-icon-sc" },
                { "country": "Sierra Leona", "capital": "Freetown", "flagClass": "flag-icon-sl" },
                { "country": "Somalia", "capital": "Mogadiscio", "flagClass": "flag-icon-so" },
                { "country": "Sudán", "capital": "Jartum", "flagClass": "flag-icon-sd" },
                { "country": "Sudáfrica", "capital": "Pretoria", "flagClass": "flag-icon-za" },
                { "country": "Sudán del Sur", "capital": "Yuba", "flagClass": "flag-icon-ss" },
                { "country": "Tanzania", "capital": "Dodoma", "flagClass": "flag-icon-tz" },
                { "country": "Togo", "capital": "Lomé", "flagClass": "flag-icon-tg" },
                { "country": "Túnez", "capital": "Túnez", "flagClass": "flag-icon-tn" },
                { "country": "Uganda", "capital": "Kampala", "flagClass": "flag-icon-ug" },
                { "country": "Zambia", "capital": "Lusaka", "flagClass": "flag-icon-zm" },
                { "country": "Zimbabue", "capital": "Harare", "flagClass": "flag-icon-zw" }
            ]
        },
        {
            "id": "northAmerica",
            "language": "ES",
            "name": "Norteamérica y América Central",
            "countries": [
                { "country": "Antigua y Barbuda", "capital": "Saint John's", "flagClass": "flag-icon-ag" },
                { "country": "Bahamas", "capital": "Nassau", "flagClass": "flag-icon-bs" },
                { "country": "Barbados", "capital": "Bridgetown", "flagClass": "flag-icon-bb" },
                { "country": "Belice", "capital": "Belmopán", "flagClass": "flag-icon-bz" },
                { "country": "Canadá", "capital": "Ottawa", "flagClass": "flag-icon-ca" },
                { "country": "Costa Rica", "capital": "San José", "flagClass": "flag-icon-cr" },
                { "country": "Cuba", "capital": "La Habana", "flagClass": "flag-icon-cu" },
                { "country": "Dominica", "capital": "Roseau", "flagClass": "flag-icon-dm" },
                { "country": "República Dominicana", "capital": "Santo Domingo", "flagClass": "flag-icon-do" },
                { "country": "El Salvador", "capital": "San Salvador", "flagClass": "flag-icon-sv" },
                { "country": "Granada", "capital": "Saint George's", "flagClass": "flag-icon-gd" },
                { "country": "Guatemala", "capital": "Ciudad de Guatemala", "flagClass": "flag-icon-gt" },
                { "country": "Haití", "capital": "Puerto Príncipe", "flagClass": "flag-icon-ht" },
                { "country": "Honduras", "capital": "Tegucigalpa", "flagClass": "flag-icon-hn" },
                { "country": "Jamaica", "capital": "Kingston", "flagClass": "flag-icon-jm" },
                { "country": "México", "capital": "Ciudad de México", "flagClass": "flag-icon-mx" },
                { "country": "Nicaragua", "capital": "Managua", "flagClass": "flag-icon-ni" },
                { "country": "Panamá", "capital": "Ciudad de Panamá", "flagClass": "flag-icon-pa" },
                { "country": "San Cristóbal y Nieves", "capital": "Basseterre", "flagClass": "flag-icon-kn" },
                { "country": "San Vicente y las Granadinas", "capital": "Kingstown", "flagClass": "flag-icon-vc" },
                { "country": "Santa Lucía", "capital": "Castries", "flagClass": "flag-icon-lc" },
                { "country": "Trinidad y Tobago", "capital": "Puerto España", "flagClass": "flag-icon-tt" },
                { "country": "Estados Unidos", "capital": "Washington D.C.", "flagClass": "flag-icon-us" }
            ]
        },
        {
            "id": "southAmerica",
            "language": "ES",
            "name": "Sudamérica",
            "countries": [
                { "country": "Argentina", "capital": "Buenos Aires", "flagClass": "flag-icon-ar" },
                { "country": "Bolivia", "capital": "Sucre", "flagClass": "flag-icon-bo" },
                { "country": "Brasil", "capital": "Brasilia", "flagClass": "flag-icon-br" },
                { "country": "Chile", "capital": "Santiago", "flagClass": "flag-icon-cl" },
                { "country": "Colombia", "capital": "Bogotá", "flagClass": "flag-icon-co" },
                { "country": "Ecuador", "capital": "Quito", "flagClass": "flag-icon-ec" },
                { "country": "Guyana", "capital": "Georgetown", "flagClass": "flag-icon-gy" },
                { "country": "Paraguay", "capital": "Asunción", "flagClass": "flag-icon-py" },
                { "country": "Perú", "capital": "Lima", "flagClass": "flag-icon-pe" },
                { "country": "Surinam", "capital": "Paramaribo", "flagClass": "flag-icon-sr" },
                { "country": "Uruguay", "capital": "Montevideo", "flagClass": "flag-icon-uy" },
                { "country": "Venezuela", "capital": "Caracas", "flagClass": "flag-icon-ve" }
            ]
        },
        {
            "id": "oceania",
            "language": "ES",
            "name": "Oceanía",
            "countries": [
                { "country": "Australia", "capital": "Canberra", "flagClass": "flag-icon-au" },
                { "country": "Fiyi", "capital": "Suva", "flagClass": "flag-icon-fj" },
                { "country": "Kiribati", "capital": "Tarawa", "flagClass": "flag-icon-ki" },
                { "country": "Islas Marshall", "capital": "Majuro", "flagClass": "flag-icon-mh" },
                { "country": "Micronesia", "capital": "Palikir", "flagClass": "flag-icon-fm" },
                { "country": "Nauru", "capital": "Yaren", "flagClass": "flag-icon-nr" },
                { "country": "Nueva Zelanda", "capital": "Wellington", "flagClass": "flag-icon-nz" },
                { "country": "Palaos", "capital": "Ngerulmud", "flagClass": "flag-icon-pw" },
                { "country": "Papúa Nueva Guinea", "capital": "Port Moresby", "flagClass": "flag-icon-pg" },
                { "country": "Samoa", "capital": "Apia", "flagClass": "flag-icon-as" },
                { "country": "Islas Salomón", "capital": "Honiara", "flagClass": "flag-icon-sb" },
                { "country": "Tonga", "capital": "Nukualofa", "flagClass": "flag-icon-to" },
                { "country": "Tuvalu", "capital": "Funafuti", "flagClass": "flag-icon-tv" },
                { "country": "Vanuatu", "capital": "Port Vila", "flagClass": "flag-icon-vu" }
            ]
        }
    ]
};

let usedQuestions = [];
let incorrectOptions = [];
const incorrectOptionsNumber = 3;

/*** MAIN ****/
document.addEventListener('DOMContentLoaded',
function() {
    createContinentButtons();
    document.getElementById('btn-start-game').addEventListener('click',
    function() {
        let setupStatus = setupQuestions();
        if(setupStatus == false){
            return
        }
        startGame();
    });
});

/*** MAIN ****/

// Global function that creates all the button options
function createButtons(options, optionsValues, optionsDiv) {
    // console.log(options, optionsValues);
    for (let i = 0; i < options.length; i++) {
        let button = document.createElement('button');
        button.className = 'btn btn-outline-danger';
        button.textContent = options[i];
        button.dataset.id = optionsValues[i];
        optionsDiv.appendChild(button);
    }
}

/* CONTINENTS & QUESTIONS*/

// Creates all the button options
function createContinentButtons() {
    const continentsDiv = document.getElementById('continents');
    const continentIds = data.continents.map(continent => continent.id);
    const continentNames = data.continents.map(continent => continent.name);
    createButtons(continentNames, continentIds, continentsDiv);
    // To continent buttons active effect
    let optionsDiv = document.getElementById('continent-selection');
    optionsDiv.querySelectorAll('.btn.btn-outline-danger').forEach(button => {
        button.addEventListener('click', () => {
            button.classList.toggle('active');
        });
    });
}
// Creates options buttons
function createAnswerButtons(currentQuestion) {
    const answerDiv = document.getElementById('options');
    answerDiv.innerHTML = ''; // Cleans previous HTML options
    const incorrectOptions = getIncorrectOptions(currentQuestion.capital);
    const options = [currentQuestion.capital, ...incorrectOptions];
    options.sort(() => Math.random() - 0.5);
    createButtons(options, options, answerDiv);
    // console.log('Options: ', options); // Prints current options on console. For debugging
    
    // Edits active status for options
    answerDiv.querySelectorAll('.btn-outline-danger').forEach(button => {
        button.addEventListener('click', () => {
            answerDiv.querySelectorAll('.btn-outline-danger').forEach(btn => {
                btn.classList.remove('active');
                btn.classList.add('disabled');
                btn.disabled = true;
            });
            button.classList.remove('disabled');
            button.classList.add('active');
            button.disabled = false;
            nextButton.classList.remove('disabled');
            nextButton.disabled = false;
        });
    });    
}

// Configures the used questions inside the game
function setupQuestions() {
    questions = []; //Cleans if previous questions were applied
    let selectedContinents = Array.from(document.querySelectorAll('#continent-selection .btn.btn-outline-danger.active'))
        .map(button => button.getAttribute('data-id'));
    // console.log('Selected Continents: ', selectedContinents); // Debugging
    if (selectedContinents.length === 0) {
        // console.log('Continents array is empty!');
        const errorMessageDiv = document.getElementById('error-message');
        errorMessageDiv.textContent = 'Por favor, selecciona al menos un continente para comenzar el juego.';
        errorMessageDiv.classList.remove('d-none');
        return false;
    }
    else {
    document.getElementById('error-message').classList.add('d-none'); // Hides error message
    }
    for (let i = 0; i < data.continents.length; i++) {
        if (selectedContinents.includes(data.continents[i]['id'])) {
            questions.push(...data.continents[i]['countries']);
        }
    }
}

/* CONTINENTS & QUESTIONS*/

/* START GAME */

// Inits the game when questions are saved
function startGame() {
    document.getElementById('continent-selection').style.display = 'none';
    const titleQuestion = 'Capital de';
    let title = document.getElementById('title');
    title.innerText = titleQuestion;
    document.getElementById('game').classList.remove('d-none');
    nextQuestion();
}

/* START GAME */

// Creates all the button options

// Retrieves next question
function nextQuestion() {
    if (usedQuestions.length < questions.length) {
        let currentQuestion = getRandomQuestion();
        // console.log('Current Question:', currentQuestion); // For debugging
        // console.log('Used Questions:', usedQuestions); // For debugging
        // console.log('Total Questions: ', questions); // For debugging
        const feedback = document.getElementById('feedback');
    
        // Flag & country settings
        let flag = document.getElementById('flag');
        let countryName = document.getElementById('country-name');
        flag.className = 'flag-icon ' + currentQuestion.flagClass;
        countryName.innerText = currentQuestion.country;
        createAnswerButtons(currentQuestion);
        feedback.innerHTML = ''; // Cleans previous HTML info
        feedback.classList.add('d-none');
        nextButton = document.getElementById('next-button');
        nextButton.classList.add('disabled');
        nextButton.disabled = true;
        // Gets the clicked capital
        const buttons = document.querySelectorAll('#options .btn.btn-outline-danger');
        buttons.forEach(button => {
            button.addEventListener('click', function() {
                const selectedCapital = this.getAttribute('data-id');
                // console.log('Selected Capital:', selectedCapital);
                checkAnswer(selectedCapital, currentQuestion.capital);
            });
        });
    } else {
        feedback.classList.toggle('alert-success', false);
        feedback.classList.toggle('alert-danger', false);
        feedback.classList.toggle('alert-info', true);
        feedback.classList.remove('d-none');
        feedback.innerText = '¡Juego terminado!';
        nextButton.classList.add('d-none');
    }
}

// Gets random question
function getRandomQuestion() {
    let selectedQuestion;
    let randomIndex;
    do {
        randomIndex = Math.floor(Math.random() * questions.length);
        selectedQuestion = questions[randomIndex];
    } while (usedQuestions.includes(selectedQuestion));
    usedQuestions.push(selectedQuestion);
    return selectedQuestion;
}
// Gets the incorrect options
function getIncorrectOptions(correctCapital) {
    incorrectOptions = [];
    // console.log('Correct capital: ', correctCapital);
    while (incorrectOptions.length < incorrectOptionsNumber) {
        let randomCapital = questions[Math.floor(Math.random() * questions.length)].capital;
        if (randomCapital !== correctCapital && !incorrectOptions.includes(randomCapital)) {
            incorrectOptions.push(randomCapital);
        }
    }
    return incorrectOptions;
}

// Verifies the answer
function checkAnswer(selectedCapital, rightOption) {
    // console.log('Selected capital: ' + selectedCapital + '-- Right option: ' + rightOption);
    feedbackDiv = document.getElementById('feedback');
    if (selectedCapital == rightOption) {
        feedbackDiv.innerHTML = '<b>¡Correcto!</b>';
        feedbackDiv.classList.toggle('alert-danger', false);
        feedbackDiv.classList.toggle('alert-success', true);
    }
    else {
        feedbackDiv.innerHTML = 'Incorrecto. La respuesta correcta es <b>"' + rightOption + '"</b>.';
        feedbackDiv.classList.toggle('alert-success', false);
        feedbackDiv.classList.toggle('alert-danger', true);
    }
    feedbackDiv.classList.remove('d-none');
}
